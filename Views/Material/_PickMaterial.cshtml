@model Hattmakarens_system.ViewModels.HatmodelViewModel


    <div class="form-group ">
        @Html.Label("Välj Tyg", new { @class = "col-md-2 control-label" })
        <div class="col-md-10 ">
            <div class="btn-group-toggle" data-toggle="buttons">
                @foreach (var material in Model.TygMaterial)
                {
                    if (material.State == true)
                    {
                        <label class="btn btn-secondary" type="submit" value="@material.MaterialId" id="@material.MaterialId Badge" style="background-color: @material.Name;" onclick="CheckMaterial(@material.MaterialId)">
                            <input type="checkbox" checked autocomplete="off"> @material.MaterialName <span class="badge badge-primary"> <img src="@Href("~/Img/icons8-done-24.png")" style="width: 12px; height: 12px;" /> </span>
                        </label>

                        <label class="btn btn-secondary" type="submit" value="@material.MaterialId" id="@material.MaterialId NoBadge" style="background-color: @material.Name; display: none;" onclick="CheckMaterial(@material.MaterialId)">
                            <input type="checkbox" checked autocomplete="off"> @material.MaterialName
                        </label>
                    }
                    else
                    {
                        <label class="btn btn-secondary" type="submit" value="@material.MaterialId" id="@material.MaterialId Badge" style="background-color: @material.Name; display: none;" onclick="CheckMaterial(@material.MaterialId)">
                            <input type="checkbox" checked autocomplete="off"> @material.MaterialName <span class="badge badge-primary"> <img src="@Href("~/Img/icons8-done-24.png")" style="width: 12px; height: 12px;" /> </span>
                        </label>

                        <label class="btn btn-secondary" type="submit" value="@material.MaterialId" id="@material.MaterialId NoBadge" style="background-color: @material.Name;" onclick="CheckMaterial(@material.MaterialId)">
                            <input type="checkbox" checked autocomplete="off"> @material.MaterialName
                        </label>
                    }
                }
            </div>
        </div>
    </div>

    <div class="form-group ">
        @Html.Label("Välj Dekoration", new { @class = "col-md-2 control-label" })
        <div class="col-md-10 ">
            <div class="btn-group-toggle" data-toggle="buttons">
                @foreach (var material in Model.DekorationMaterial)
                {
                    if (material.State == true)
                    {
                        <label class="btn btn-secondary" type="submit" value="@material.MaterialId" id="@material.MaterialId" style="background-color: @material.Name;" onclick=" location.href='@Url.Action("PickMaterialModel", "HatModel", new { id = material.MaterialId })'">
                            <input type="checkbox" checked autocomplete="off"> @material.MaterialName <span class="badge badge-primary"> <img src="@Href("~/Img/icons8-done-24.png")" style="width: 12px; height: 12px;" /> </span>
                        </label>
                    }
                    else
                    {
                        <label class="btn btn-secondary" type="submit" value="@material.MaterialId" id="@material.MaterialId" style="background-color: @material.Name;" onclick=" location.href='@Url.Action("PickMaterialModel", "HatModel", new { id = material.MaterialId })'">
                            <input type="checkbox" checked autocomplete="off"> @material.MaterialName
                        </label>
                    }
                }

            </div>
        </div>
    </div>

    <div class="form-group ">
        @Html.Label("Välj Tråd", new { @class = "col-md-2 control-label" })
        <div class="col-md-10 ">
            <div class="btn-group-toggle" data-toggle="buttons">
                @foreach (var material in Model.TrådMaterial)
                {
                    if (material.State == true)
                    {
                        <label class="btn btn-secondary" type="submit" value="@material.MaterialId" id="@material.MaterialId" style="background-color: @material.Name;" onclick=" location.href='@Url.Action("PickMaterialModel", "HatModel", new { id = material.MaterialId })'">
                            <input type="checkbox" checked autocomplete="off"> @material.MaterialName <span class="badge badge-primary"> <img src="@Href("~/Img/icons8-done-24.png")" style="width: 12px; height: 12px;" /> </span>
                        </label>
                    }
                    else
                    {
                        <label class="btn btn-secondary" type="submit" value="@material.MaterialId" id="@material.MaterialId" style="background-color: @material.Name;" onclick=" location.href='@Url.Action("PickMaterialModel", "HatModel", new { id = material.MaterialId })'">
                            <input type="checkbox" checked autocomplete="off"> @material.MaterialName
                        </label>
                    }
                }
            </div>
        </div>
    </div>

@section scripts{
    <script src="~/Scripts/jquery-3.4.1.min.js"></script>
    <script src="~/Scripts/jquery-ui-1.13.0.min.js"></script>
    <link href="~/Content/themes/base/jquery-ui.min.css" rel="stylesheet" />
}

<script type="text/javascript">

        @*$('#partial').load('@Url.Action("CheckMaterial", "HatmodelController", new { Id = Model.Id })');*@

        @*setInterval($('#partial').load('@Url.Action("CheckMaterial", "HatmodelController", new { Id = Model.Id })'), 2000);*@

    function CheckMaterial(id) {
        $.ajax({
            url: "@Url.Action("CheckMaterial", "HatModel")",
            type: "POST",
            async: true,
            dataType: "json",
            data: {
                Id: id
            }
        })
        document.getElementById(id + "Badge").style.display = 'block';
        document.getElementById(id + "NoBadge").style.display = 'none';
    }
</script>
